<div class="panel panel-theme">
    <div class="panel-body">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <label class="control-label">Budget</label>
                    <select validate="0" name="bid" [(ngModel)]="bid" class="form-control" (ngModelChange)="BindControlCenterDT();">
                        <option value="0">Select Budget</option>
                        <option *ngFor="let row of bdginitiateDT" [value]="row.bid">
                            {{row.btitle}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label class="control-label">Status</label>
                    <select id="status" name="status" [(ngModel)]="status" class="form-control">
                        <option [value]="0">Select Status</option>
                        <option *ngFor="let row of statusDT" [value]="row.key">
                            {{row.val}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label">Narration</label>
                    <textarea name="narration" validate="" [(ngModel)]="narration" class="form-control small-text-box" cols="150" rows="5"></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="table-responsive" *ngIf="ctrlcenterDT.length">
        <div class="panel-body">
            <button type="button" class="btn btn-theme btn-sm" (click)="copyAcrossRow()">Copy Across Row</button>
            <button type="button" class="btn btn-theme btn-sm" (click)="copyAcrossGrid()">Copy Across Grid</button>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <td width="20px"></td>
                        <th width="150px">Envelope</th>
                        <th width="150px" *ngFor="let mrow of financialmonthDT">{{mrow.monthhead}}</th>
                        <th width="150px">Total</th>
                    </tr>
                </thead>
                <tbody *ngFor="let ccrow of ctrlcenterDT">
                    <tr>
                        <td width="50px">
                            <button class="btn btn-theme btn-sm" (click)="ExpandEnvelopeTypeDT(ccrow)">{{ccrow.issh == 1 ? "-" : "+"}}</button>
                        </td>
                        <td width="150px">
                            {{ccrow.ccname}}
                        </td>
                        <td width="150px" *ngFor="let mrow of ccrow.monthdetails">
                            <input type="text" class="form-control" [(ngModel)]="mrow.monthvalue" (keydown)="totalAmtYearWise(ccrow)" />
                        </td>
                        <td width="150px">
                            {{totalAmtYearWise(ccrow)}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="15">
                            <table class="table table-striped table-bordered table-hover">
                                <tbody *ngFor="let et1row of ccrow.envtitledt; let i = index;">
                                    <tr [style.display]="ccrow.issh == 0?'none':''">
                                        <td width="50px">
                                            <button class="btn btn-theme btn-sm" (click)="ExpandExpenseBudgetDT(et1row)">{{et1row.issh == 1 ? "-" : "+"}}</button>
                                        </td>
                                        <td width="150px">
                                            {{et1row.envtitle}}
                                        </td>
                                        <td width="150px" *ngFor="let mrow of et1row.monthdetails">
                                            <input type="text" class="form-control" [(ngModel)]="mrow.monthvalue" (keydown)="totalAmtYearWise(et1row)" />
                                        </td>
                                        <td width="150px">
                                            {{totalAmtYearWise(et1row)}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="15">
                                            <table class="table table-striped table-bordered table-hover">
                                                <tbody *ngFor="let et2row of et1row.subitemsdt; let i = index;">
                                                    <tr [style.display]="et1row.issh == 0?'none':''">
                                                        <td width="50px">
                                                            {{i+1}}
                                                        </td>
                                                        <td width="150px" align="right">
                                                            {{et2row.subitem}}
                                                        </td>
                                                        <td width="150px" *ngFor="let mrow of et2row.monthdetails">
                                                            <input type="text" class="form-control" [(ngModel)]="mrow.monthvalue" (keydown)="totalAmtYearWise(et2row)" />
                                                        </td>
                                                        <td width="150px">
                                                            {{totalAmtYearWise(et2row)}}
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td width="20px"></td>
                        <th width="150px">Total Amount</th>
                        <th width="150px" *ngFor="let mrow of financialmonthDT"></th>
                        <th width="150px">{{totalAllAmount()}}</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>


<!--<div class="panel-body">
    <p-dataTable #dt [value]="expbudgetDT | filterBy: {isactive: true}" [lazy]="true">
        <p-column header="#" [style]="{'width':'50px','text-align':'left'}">
            <template let-i="rowIndex" pTemplate="editor">
                {{i + 1}}
            </template>
        </p-column>
        <p-column header="Envelope" [style]="{'width':'150px'}">
            <template let-row="rowData" let-i="rowIndex" pTemplate="body">
                {{row.envtitle}}
            </template>
        </p-column>
        <p-column [value]="expbudgetDT" header="Employee" [style]="{'width':'150px','text-align':'left'}">
            <template let-row="row.monthdetails" let-i="rowIndex" pTemplate="body">
                <input type="text" class="form-control" [(ngModel)]="row.monthvalue" (keydown)="totalAmtYearWise(row)" />
            </template>
        </p-column>
        <p-column [style]="{'text-align':'center'}" *ngIf="!isdetails">
            <template let-col let-row="rowData" pTemplate="editor">
                {{totalAmtYearWise(row)}}
            </template>
        </p-column>
        <footer>
            <table class="table table-striped table-bordered">
                <tbody>
                    <tr>
                        <th width="150px">Total Amount</th>
                        <th width="150px" *ngFor="let mrow of financialmonthDT"></th>
                        <th width="150px">{{totalAllAmount()}}</th>
                    </tr>
                </tbody>
            </table>
        </footer>
    </p-dataTable>
</div>-->